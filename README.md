# Backend Axenta

Backend для системы управления складом на Go с использованием Gin и PostgreSQL.

## Технологии

- **Go 1.21+**
- **Gin** - HTTP веб фреймворк
- **GORM** - ORM для работы с базой данных
- **PostgreSQL** - база данных
- **godotenv** - загрузка переменных окружения

## Быстрый старт

### 1. Установка зависимостей

```bash
go mod download
```

### 2. Настройка базы данных

База данных будет создана автоматически при первом запуске приложения. 

Если хотите создать базу данных вручную:

```sql
CREATE DATABASE axenta_db;
```

### 3. Настройка переменных окружения

Скопируйте файл примера и настройте переменные:

```bash
cp env.example .env
```

Отредактируйте `.env` файл:

```env
# Конфигурация базы данных PostgreSQL
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_password
DB_NAME=axenta_db
DB_SSLMODE=disable

# Порт сервера
SERVER_PORT=8080
```

### 4. Запуск сервера

```bash
go run main.go
```

Сервер будет доступен по адресу: `http://localhost:8080`

## API Endpoints

### Базовые

- `GET /ping` - Проверка работы сервера и подключения к БД

## Структура проекта

```
backend_axenta/
├── main.go              # Точка входа приложения
├── go.mod              # Управление зависимостями
├── env.example         # Пример файла с переменными окружения
├── database/           # Пакет для работы с БД
│   └── database.go     # Подключение и конфигурация PostgreSQL
├── models/             # Модели данных
│   └── user.go         # Модель пользователя
└── README.md           # Документация
```

## Особенности

- **Автосоздание БД**: Автоматически создает базу данных, если она не существует
- **Автомиграция**: При запуске сервера автоматически создаются/обновляются таблицы БД
- **CORS**: Настроена поддержка CORS для фронтенда
- **Переменные окружения**: Конфигурация через .env файл
- **Логирование**: Подробные логи подключения и операций БД
- **Безопасность**: Пароли не возвращаются в JSON ответах

## Разработка

### Добавление новых моделей

1. Создайте модель в папке `models/`
2. Добавьте модель в функцию `autoMigrate()` в файле `database/database.go`
3. Перезапустите сервер для применения миграций

### Переменные окружения

Все настройки можно задать через переменные окружения или .env файл:

- `DB_HOST` - хост PostgreSQL (по умолчанию: localhost)
- `DB_PORT` - порт PostgreSQL (по умолчанию: 5432)
- `DB_USER` - пользователь БД (по умолчанию: postgres)
- `DB_PASSWORD` - пароль БД
- `DB_NAME` - название БД (по умолчанию: axenta_db)
- `DB_SSLMODE` - режим SSL (по умолчанию: disable)
- `SERVER_PORT` - порт сервера (по умолчанию: 8080)

## Тестирование подключения

После запуска сервера проверьте работу:

```bash
curl http://localhost:8080/ping
```

Ответ должен содержать:
```json
{
    "status": "success",
    "message": "pong",
    "database": "connected"
}
```
