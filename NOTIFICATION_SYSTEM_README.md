# –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π Axenta CRM

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Telegram Bot, Email, SMS –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ü§ñ Telegram Bot

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot API
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∫–æ–º–∞–Ω–¥
- Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- Webhook –∏ polling —Ä–µ–∂–∏–º—ã

### üìß Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

- SMTP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π TLS
- HTML —à–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–∏

### üì± SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö SMS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏

### üé® –°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤

- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —à–∞–±–ª–æ–Ω—ã —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTML –¥–ª—è email
- –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏

### üîÑ Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–∞–Ω–∞–ª–∞–º–∏
- –£—á–µ—Ç –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –¢–∏—Ö–∏–µ —á–∞—Å—ã
- –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–Ω–∞–ª–∞–º –∏ —Ç–∏–ø–∞–º
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **NotificationService** - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
2. **TelegramClient** - –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram Bot API
3. **NotificationFallbackService** - fallback –ª–æ–≥–∏–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
4. **NotificationAPI** - REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

- `NotificationTemplate` - —à–∞–±–ª–æ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `NotificationLog` - –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `NotificationSettings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∫–æ–º–ø–∞–Ω–∏–∏
- `UserNotificationPreferences` - –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. Telegram Bot

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather –≤ Telegram
# –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–æ–º–ø–∞–Ω–∏–∏
curl -X PUT http://localhost:8080/api/notifications/settings \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{
    "telegram_enabled": true,
    "telegram_bot_token": "YOUR_BOT_TOKEN"
  }'
```

### 2. Email (SMTP)

```bash
curl -X PUT http://localhost:8080/api/notifications/settings \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{
    "email_enabled": true,
    "smtp_host": "smtp.gmail.com",
    "smtp_port": 587,
    "smtp_username": "your-email@gmail.com",
    "smtp_password": "your-password",
    "smtp_from_email": "noreply@yourcompany.com",
    "smtp_from_name": "Axenta CRM",
    "smtp_use_tls": true
  }'
```

### 3. SMS

```bash
curl -X PUT http://localhost:8080/api/notifications/settings \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{
    "sms_enabled": true,
    "sms_provider": "twilio",
    "sms_api_key": "YOUR_API_KEY",
    "sms_api_secret": "YOUR_API_SECRET",
    "sms_from_number": "+1234567890"
  }'
```

## API Endpoints

### –õ–æ–≥–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

- `GET /api/notifications/logs` - –ø–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `GET /api/notifications/statistics` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º

### –®–∞–±–ª–æ–Ω—ã

- `GET /api/notifications/templates` - –ø–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω—ã
- `POST /api/notifications/templates` - —Å–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω
- `PUT /api/notifications/templates/:id` - –æ–±–Ω–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω
- `DELETE /api/notifications/templates/:id` - —É–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω
- `POST /api/notifications/templates/defaults` - —Å–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏

- `GET /api/notifications/settings` - –ø–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- `PUT /api/notifications/settings` - –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- `GET /api/notifications/preferences` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /api/notifications/preferences` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- `POST /api/notifications/test` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### Webhook

- `POST /api/notifications/telegram/webhook/:company_id` - webhook –¥–ª—è Telegram

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ—Å—Ç–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```go
templateData := map[string]interface{}{
    "UserName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "Message": "–í–∞—à –º–æ–Ω—Ç–∞–∂ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 10:00",
    "Address": "—É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. 1",
}

err := notificationService.SendNotification(
    "installation_reminder",  // —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    "telegram",              // –∫–∞–Ω–∞–ª
    "123456789",            // –ø–æ–ª—É—á–∞—Ç–µ–ª—å (Telegram ID)
    templateData,           // –¥–∞–Ω–Ω—ã–µ –¥–ª—è —à–∞–±–ª–æ–Ω–∞
    companyID,              // ID –∫–æ–º–ø–∞–Ω–∏–∏
    installationID,         // ID —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏
    "installation"          // —Ç–∏–ø —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏
)
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å fallback

```go
err := fallbackService.SendWithFallback(
    "billing_alert",
    "user@example.com",  // –ø–æ–ª—É—á–∞—Ç–µ–ª—å
    templateData,
    companyID,
    invoiceID,
    "invoice"
)
```

### –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

```go
template := models.NotificationTemplate{
    Name:        "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø–ª–∞—Ç–µ–∂–µ",
    Type:        "payment_reminder",
    Channel:     "telegram",
    Subject:     "",
    Template:    "üí∞ <b>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø–ª–∞—Ç–µ–∂–µ</b>\n\n–°—É–º–º–∞: {{.Amount}} —Ä—É–±.\n–°—Ä–æ–∫: {{.DueDate}}\n\n–û–ø–ª–∞—Ç–∏—Ç—å –º–æ–∂–Ω–æ –ø–æ —Å—Å—ã–ª–∫–µ: {{.PaymentURL}}",
    Description: "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–µ–º –ø–ª–∞—Ç–µ–∂–µ",
    Priority:    "high",
    CompanyID:   companyID,
}
```

## –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ú–æ–Ω—Ç–∞–∂–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

- `installation_reminder` - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –º–æ–Ω—Ç–∞–∂–µ
- `installation_created` - –Ω–æ–≤—ã–π –º–æ–Ω—Ç–∞–∂ —Å–æ–∑–¥–∞–Ω
- `installation_updated` - –º–æ–Ω—Ç–∞–∂ –æ–±–Ω–æ–≤–ª–µ–Ω
- `installation_completed` - –º–æ–Ω—Ç–∞–∂ –∑–∞–≤–µ—Ä—à–µ–Ω
- `installation_cancelled` - –º–æ–Ω—Ç–∞–∂ –æ—Ç–º–µ–Ω–µ–Ω
- `installation_rescheduled` - –º–æ–Ω—Ç–∞–∂ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω

### –ë–∏–ª–ª–∏–Ω–≥

- `billing_alert` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –±–∏–ª–ª–∏–Ω–≥–µ
- `invoice_created` - —Å—á–µ—Ç —Å–æ–∑–¥–∞–Ω
- `payment_reminder` - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø–ª–∞—Ç–µ–∂–µ
- `payment_overdue` - –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–π –ø–ª–∞—Ç–µ–∂

### –°–∫–ª–∞–¥

- `stock_alert` - –Ω–∏–∑–∫–∏–π –æ—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ
- `warranty_alert` - –∏—Å—Ç–µ—á–µ–Ω–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏
- `maintenance_alert` - —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
- `equipment_movement` - –¥–≤–∏–∂–µ–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–∞

- `system_notification` - —Å–∏—Å—Ç–µ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- `security_alert` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- `emergency_alert` - —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

## –®–∞–±–ª–æ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–±–ª–æ–Ω—ã:

### Telegram —à–∞–±–ª–æ–Ω—ã

```
üîß –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –º–æ–Ω—Ç–∞–∂–µ
üìÖ –î–∞—Ç–∞: {{.Date}}
‚è∞ –í—Ä–µ–º—è: {{.Time}}
üìç –ê–¥—Ä–µ—Å: {{.Address}}
üè¢ –û–±—ä–µ–∫—Ç: {{.Object.Name}}
üìû –ö–æ–Ω—Ç–∞–∫—Ç –∫–ª–∏–µ–Ω—Ç–∞: {{.ClientContact}}
```

### Email —à–∞–±–ª–æ–Ω—ã

```html
<h2>{{.Title}}</h2>
<p>{{.Description}}</p>
<p><b>–£—Ä–æ–≤–µ–Ω—å –≤–∞–∂–Ω–æ—Å—Ç–∏:</b> {{.Severity}}</p>
```

## Telegram Bot –∫–æ–º–∞–Ω–¥—ã

- `/start` - –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- `/help` - —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
- `/status` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `/settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
go test ./services -v

# –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
go test ./services -run TestNotification -v

# Benchmark —Ç–µ—Å—Ç—ã
go test ./services -bench=BenchmarkNotification -v
```

### –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

```bash
curl -X POST http://localhost:8080/api/notifications/test \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{
    "channel": "telegram",
    "recipient": "123456789",
    "message": "–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ",
    "subject": "–¢–µ—Å—Ç"
  }'
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
curl "http://localhost:8080/api/notifications/logs?limit=100" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É
curl "http://localhost:8080/api/notifications/logs?type=installation_reminder" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
curl "http://localhost:8080/api/notifications/logs?status=failed" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```bash
curl "http://localhost:8080/api/notifications/statistics" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

–û—Ç–≤–µ—Ç:

```json
{
  "status": "success",
  "data": {
    "total": 1250,
    "sent": 1180,
    "failed": 45,
    "pending": 25,
    "by_channel": [
      { "channel": "telegram", "count": 850 },
      { "channel": "email", "count": 300 },
      { "channel": "sms", "count": 100 }
    ],
    "by_type": [
      { "type": "installation_reminder", "count": 500 },
      { "type": "billing_alert", "count": 300 },
      { "type": "stock_alert", "count": 200 }
    ]
  }
}
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - Telegram –∫–ª–∏–µ–Ω—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –ø–æ company_id
2. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –≥–æ—Ä—É—Ç–∏–Ω–∞—Ö
3. **Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
4. **Connection pooling** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SMTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

### Benchmark —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

```
BenchmarkNotificationService_SendNotification-8     1000    1.2ms/op
BenchmarkNotificationService_RenderTemplate-8       5000    0.3ms/op
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö webhook
- Rate limiting –¥–ª—è API endpoints

### –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å

- –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ª–æ–≥–∞—Ö
- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º

## Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Telegram –±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç**

   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook

2. **Email –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è**

   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ TLS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∞–º-—Ñ–∏–ª—å—Ç—Ä—ã

3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —à–∞–±–ª–æ–Ω–æ–≤
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –õ–æ–≥–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
tail -f /var/log/axenta/app.log | grep -i notification

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
SELECT * FROM notification_logs WHERE status = 'failed' ORDER BY created_at DESC LIMIT 10;
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–ª–∏–µ–Ω—Ç –¥–ª—è –∫–∞–Ω–∞–ª–∞
3. –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ `sendNotificationWithTemplate`
4. –î–æ–±–∞–≤—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `NotificationSettings`
5. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ç–∏–ø –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞—Ö
2. –°–æ–∑–¥–∞–π—Ç–µ —à–∞–±–ª–æ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
3. –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä–≤–∏—Å
4. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## Roadmap

- [ ] Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Microsoft Teams
- [ ] Slack –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] WhatsApp Business API
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –¥–∞—à–±–æ—Ä–¥—ã
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
- [ ] –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
